<!DOCTYPE html>
<!--
	Dynamic Recipes Project
	October - November 2020
	Copyright (c) 2020 Tanner Babcock
-->
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Awesome Recipe Editor</title>
	<link rel="icon" type="image/png" href="/images/favicon.png" />
	<link rel="stylesheet" href="/homework/assets/css/recipesProject.css" />
	<link rel="stylesheet" href="/homework/assets/css/ingredient.css" />
	<script src="https://unpkg.com/vue@2.6.11"></script>
</head>
<body>
	<div class="container">
		<header>
			<h1>Awesome Recipe Editor</h1>
			<nav>
				<ul>
					<li><a href="home.html" title="Awesome Recipes Home Page" alt="Awesome Recipes Home Page">Home</a></li>
					<li><a href="view.html" title="Awesome Recipes Recipe Browser" alt="Awesome Recipes Recipe Browser">View Recipes</a></li>
					<li><a href="edit.html" title="Go to Recipe Editor" alt="Go to Recipe Editor">Editor</a></li>
					<li><a href="about.html" title="About Awesome Recipes" alt="About Awesome Recipes">About</a></li>
				</ul>
			</nav>
		</header>
		<main id="editor">
			<div class="status top" v-html="topStatus">

			</div>
			<form method="post" enctype="multipart/form-data">
				<h2>Editing Recipe "<span v-text="recipe.filename"></span>"</h2>

				<input type="hidden" v-model="recipe.numberOfIngreds" id="numberOfIngreds" />
				<input type="hidden" v-model="recipe.numberOfSteps" id="numberOfSteps" />
				<div class="formflex large">
					<span><b>Filename:</b></span>
					<input type="text" v-model="recipe.filename" placeholder="Filename" @blur="recipe.filename = $event.target.value" title="What should this recipe's filename be in local storage?" alt="What should this recipe's filename be in local storage?" />
				</div>
				<div class="formflex">
					<span><b>Title:</b></span>
					<input type="text" v-model="recipe.title" placeholder="Pepperjack Mac n Cheese" @blur="recipe.title = $event.target.value" title="What is this recipe for? (Casserole, etc)" alt="What is this recipe for? (Casserole, etc)" />
				</div>
				<div class="formflex">
					<span><b>Image Filename:</b></span>
					<input type="text" v-model="recipe.image" placeholder="img/test.jpg" @blur="recipe.image = $event.target.value" title="Filename of the image of the food" alt="Filename of the image of the food" />
				</div>
				<div class="formflex">
					<span><b>Serves:</b></span>
					<input type="number" v-model="recipe.serves" @change="recipe.serves = parseInt($event.target.value)" title="How many does this serve?" alt="How many does this serve?" />
				</div>
				<div class="formflex">
					<span><b>Difficulty:</b></span>
					<select v-model="recipe.difficulty" @change="recipe.difficulty = $event.target.value" title="How easy is this recipe to follow?" alt="How easy is this recipe to follow?">
						<option value="easy" :selected="recipe.difficulty === 'easy'">Easy</option>
						<option value="medium" :selected="recipe.difficulty === 'medium'">Medium</option>
						<option value="hard" :selected="recipe.difficulty === 'hard'">Hard</option>
					</select>
				</div>
				<div class="formflex">
					<span><b>Preparation Time:</b></span>
					<input type="number" v-model="recipe.preparation.quantity" @change="recipe.preparation.quantity = parseInt($event.target.value)" />
					<select v-model="recipe.preparation.measurement" @change="recipe.preparation.measurement = $event.target.value">
						<option value="seconds">seconds</option>
						<option value="minutes">minutes</option>
						<option value="hours">hours</option>
						<option value="days">days</option>
					</select>
				</div>
				<div class="formflex">
					<span><b>Cooking Time:</b></span>
					<input type="number" v-model="recipe.cooking.quantity" @change="recipe.cooking.quantity = parseInt($event.target.value)" />
					<select v-model="recipe.cooking.measurement" @change="recipe.cooking.measurement = $event.target.value">
						<option value="seconds">seconds</option>
						<option value="minutes">minutes</option>
						<option value="hours">hours</option>
						<option value="days">days</option>
					</select>
				</div>

				<h2>Ingredients:</h2>
				<div class="buttons">
					<p>
						<button @click="$event.preventDefault(); AddIngredient()" title="Add an Ingredient to the end of the list" alt="Add an Ingredient to the end of the list">Add Ingredient</button> &nbsp;&nbsp;&bull;&nbsp;&nbsp;
						<button @click="$event.preventDefault(); RemoveIngredient()" title="Remove the last Ingredient from the end of the list" alt="Remove the last Ingredient from the end of the list">Remove Last Ingredient</button>
					</p>
				</div>

				<table><tbody v-if="recipe.ingredients" class="ings">
					<tr is="ingredient" v-for="(ing, index) in recipe.ingredients" :key="index" :id="index" :quant="'' + ing.quantity" :mmnt="ing.measurement" :ing="ing.name" :opt="((ing.opt) ? 'yes' : 'no')" @optinput="ing.opt = $event" @numinput="ing.quantity = $event" @inginput="ing.name = $event" @measinput="ing.measurement = $event"></tr>
				</tbody></table>

				<h2>Steps:</h2>
				<p>Don't bother typing "1.", "2.", etc. The recipe steps will be listed in order on the display page.</p>
				<table><tbody v-if="recipe.steps" class="steps">
					<tr class="step" v-for="(st, index) in recipe.steps" :key="index" :id="index">
						<td><input type="text" v-model="recipe.steps[index]" @blur="recipe.steps[index] = $event.target.value" placeholder="Make awesome food!" size="100" maxlength="200" /></td>
					</tr>
				</tbody></table>
				<div class="buttons">
					<p>
						<button @click="$event.preventDefault(); AddStep()" title="Add a Step to the end of the list" alt="Add a Step to the end of the list of instructions">Add Step</button>&nbsp;&nbsp;&bull;&nbsp;&nbsp;
						<button @click="$event.preventDefault(); RemoveStep()" title="Remove the last Step from the end of the list" alt="Remove the last Step from the end of the list">Remove Last Step</button>
					</p>

					<button @click="$event.preventDefault(); StoreObjectAs(recipe.filename)" title="Save the recipe under the given filename, if you're finished!" alt="Save the recipe under the given filename, if you're finished!">Save Recipe</button>
					<br />
					<br />
				</div>
			</form>
			<div class="status bottom" v-html="bottomStatus">

			</div>
		</main>
		<footer>
			<p><a href="/homework/wdv321/Unit-7ajax.html" title="Previous assignment" alt="Previous assignment">Unit 7: AJAX</a></p>
			<p><a href="/homework/index">&rarr; Return to WDV321 Homework &larr;</a></p>
			<p>Copyright &copy; 2020 Tanner Babcock.</p>
		</footer>
	</div>
	<script src="/homework/assets/js/editor.min.js"></script>
</body>
</html>