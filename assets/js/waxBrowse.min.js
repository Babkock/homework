!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=9)}({0:function(t,e,r){"use strict";function n(t,e,r,n,a,o,s,i){var u,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=r,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=u):a&&(u=i?function(){a.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:a),u)if(l.functional){l._injectStyles=u;var c=l.render;l.render=function(t,e){return u.call(e),c(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,u):[u]}return{exports:t,options:l}}r.d(e,"a",(function(){return n}))},1:function(t,e,r){"use strict";var n={props:{myid:{type:Number,required:!0},artist:{type:String,default:"Unknown Artist"},title:{type:String,default:"Unknown Album"},posted:{type:String,required:!0},country:{type:String,default:"us"}},data:()=>({showingExtra:!0,expandText:"-"}),computed:{artisthref:function(){return"browse?a="+encodeURI(this.artist)},albumhref:function(){return"browse?b="+this.myid},niceposted:function(){return new Date(Date.parse(this.posted.replace(/[-]/g,"/"))).toDateString()},countryexpand:function(){let t="";switch(this.country){case"us":t="United States";break;case"uk":t="United Kingdom";break;case"es":t="Spain";break;case"ca":t="Canada";break;case"de":t="Germany";break;case"ru":t="Russian Federation";break;case"dk":t="Denmark";break;case"se":t="Sweden";break;case"no":t="Norway";break;case"nl":t="Netherlands";break;case"au":t="Australia";break;case"cn":t="China";break;case"jp":t="Japan";break;case"kr":t="South Korea";break;case"ph":t="Philippines";break;case"lv":t="Latvia";break;default:t="Unknown Country"}return t}},methods:{ToggleAlbumDetails(){this.showingExtra=!0!==this.showingExtra,this.expandText=!0===this.showingExtra?"-":"+"}}},a=(r.p,r(0)),o=Object(a.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"album",attrs:{id:t.myid}},[r("div",{staticClass:"cover"},[t._t("img")],2),t._v(" "),r("h2",[r("a",{attrs:{href:t.artisthref},domProps:{textContent:t._s(t.artist)}}),t._v(" - "),r("a",{attrs:{href:t.albumhref},domProps:{textContent:t._s(t.title)}})]),t._v(" "),r("button",{domProps:{textContent:t._s(t.expandText)},on:{click:function(e){return t.ToggleAlbumDetails()}}}),t._v(" "),t.showingExtra?r("div",[t._t("info"),t._v(" "),r("h3",[t._v("Tracklist:")]),t._v(" "),t._t("tracklist"),t._v(" "),r("p",[r("b",[t._v("Posted")]),t._v(": "),r("span",{staticClass:"date",domProps:{textContent:t._s(t.niceposted)}})]),t._v(" "),r("p",[r("b",[t._v("Country")]),t._v(": "),r("span",{staticClass:"country",domProps:{textContent:t._s(t.countryexpand)}})])],2):t._e()])}),[],!1,null,null,null);e.a=o.exports},9:function(t,e,r){"use strict";r.r(e);var n=r(1),a={props:{artist:{type:String,default:""},album:{type:String,default:""},country:{type:String,default:""},stype:{type:String,default:"artist"}},computed:{avmodl:function(){return"this.artist"},bvmodl:function(){return"this.album"},cvmodl:function(){return"this.country"}}},o=(r.p,r(0)),s=Object(o.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"search-bar"},["artist"===t.stype?r("input",{attrs:{type:"text",id:"search","v-model":t.avmodl,title:"Search for an artist here",alt:"Search for an artist here",plchold:"Search Artists",size:"90",maxlength:"90"},domProps:{value:t.artist},on:{blur:function(e){return t.$emit("ainput",e.target.value)}}}):r("input",{attrs:{type:"text",id:"search","v-model":t.bvmodl,title:"Search for an album here",alt:"Search for an album here",plchold:"Search Albums",size:"90",maxlength:"90"},domProps:{value:t.album},on:{blur:function(e){return t.$emit("binput",e.target.value)}}}),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:this.searchType,expression:"this.searchType"}],attrs:{id:"stype",name:"stype",title:"Choose whether to search Artists or Albums",alt:"Choose whether to search Artists or Albums"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(this,"searchType",e.target.multiple?r:r[0])}}},[r("option",{attrs:{selected:""}},[t._v("Search Type")]),t._v(" "),r("option",{attrs:{value:"artist"},domProps:{selected:"artist"===t.stype}},[t._v("Artist")]),t._v(" "),r("option",{attrs:{value:"album"},domProps:{selected:"album"===t.stype}},[t._v("Album")])]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:this.country,expression:"this.country"}],attrs:{id:"country",name:"country",title:"Show only listings from this country",alt:"Show only listings from this country"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(this,"country",e.target.multiple?r:r[0])}}},[r("option",{attrs:{selected:""}},[t._v("Anywhere")]),t._v(" "),r("option",{attrs:{value:"us"},domProps:{selected:"us"===t.country}},[t._v("United States")]),t._v(" "),r("option",{attrs:{value:"ca"},domProps:{selected:"ca"===t.country}},[t._v("Canada")]),t._v(" "),r("option",{attrs:{value:"mx"},domProps:{selected:"mx"===t.country}},[t._v("Mexico")]),t._v(" "),r("option",{attrs:{value:"uk"},domProps:{selected:"uk"===t.country}},[t._v("United Kingdom")])])])}),[],!1,null,null,null).exports;Vue.component("album",n.a),Vue.component("search-box",s),Vue.mixin({methods:{BuyAlbum(t){window.location.href="https://tannerbabcock.com/homework/wdv341/wax/buy?id="+t}}});new Vue({el:"#browse",http:{emulateJSON:!0,emulateHTTP:!0},data:()=>({id:0,searchType:"",heading:"{{BROWSE_HEADING}}",artist:"{{BROWSE_ARTIST}}",album:"{{BROWSE_ALBUM}}",country:"{{BROWSE_COUNTRY}}",argument:"{{BROWSE_GET}}",val:"{{BROWSE_GET_VALUE}}",ajaxError:"",primary:[],secondary:[],tertiary:[]}),methods:{FetchAlbums(t){let e=this.argument,r=this.val,n=new FormData;n.append("id",this.id),e.length>0&&r.length>0?this.$http.post("browse?mode="+t+"&"+e+"="+r,n).then(t=>{this.primary=t.data},()=>{this.ajaxError='<p class="error">Couldn\'t fetch albums from the server.</p>',console.error("Couldn't fetch albums with mode '"+t+"', argument '"+e+"', and value '"+r+"'")}):"newest"===t?this.$http.post("browse?mode="+t,n).then(t=>{this.primary=t.data},()=>{this.ajaxError='<p class="error">Couldn\'t fetch albums from the server.</p>',console.error("Couldn't fetch albums with mode 'newest'.")}):"expensive"===t?this.$http.post("browse?mode="+t,n).then(t=>{this.secondary=t.data},()=>{this.ajaxError='<p class="error">Couldn\'t fetch albums from the server.</p>',console.error("Couldn't fetch albums with mode 'expensive'.")}):"purchased"===t?this.$http.post("browse?mode="+t,n).then(t=>{this.tertiary=t.data},()=>{this.ajaxError='<p class="error">Couldn\'t fetch albums from the server.</p>',console.error("Couldn't fetch albums with mode 'purchased'.")}):console.error("FetchAlbums() argument error")}},mounted(){switch(this.id=parseInt(document.querySelector("#userid").value),this.argument){case"a":this.FetchAlbums("artist");break;case"b":this.FetchAlbums("album");break;case"c":this.FetchAlbums("country");break;default:this.FetchAlbums("newest"),this.FetchAlbums("expensive"),0!=this.id&&this.FetchAlbums("purchased")}}})}})}));